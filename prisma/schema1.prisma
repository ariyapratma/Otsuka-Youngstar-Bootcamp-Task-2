generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/db1"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL_1")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model mst_application {
  id                  Int       @id @default(autoincrement())
  application_name    String?   @db.VarChar(255)
  group_id_technician String?   @db.VarChar(255)
  entity_id           Int?
  department_code     String?   @db.VarChar(255)
  is_deleted          Boolean?  @default(false)
  created_at          DateTime? @default(now()) @db.DateTime(0)
  created_by          String?   @db.VarChar(255)
}

model mst_application_version {
  id             Int       @id @default(autoincrement())
  application_id Int?
  version        String?   @db.VarChar(255)
  content        String?   @db.VarChar(255)
  golive_date    DateTime? @db.DateTime(0)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model mst_authorization {
  id                Int                @id @default(autoincrement())
  employee_code     String?            @unique(map: "employee_code") @db.VarChar(255)
  employee_name     String?            @db.VarChar(255)
  is_active         String?            @db.VarChar(1)
  created_at        DateTime?          @default(now()) @db.DateTime(0)
  created_by        String?            @db.VarChar(255)
  technician_level  Int?
  active_profile    Int?
  active_entities   Int?
  is_deleted        Boolean?           @default(false)
  mst_entities      mst_entities?      @relation(fields: [active_entities], references: [id], onDelete: Cascade, map: "fk_entities")
  mst_profile       mst_profile?       @relation(fields: [active_profile], references: [id], onDelete: Cascade, map: "fk_profile")
  mst_manpower_cost mst_manpower_cost? @relation(fields: [technician_level], references: [id], onUpdate: SetNull, map: "mst_authorization_ibfk_1")
  tr_project_task   tr_project_task[]
  tr_project_team   tr_project_team[]

  @@index([active_entities], map: "fk_entities")
  @@index([active_profile], map: "fk_profile")
  @@index([technician_level], map: "technician_level")
}

model mst_authorization_profile {
  id            Int          @id @default(autoincrement())
  employee_code String?      @db.VarChar(255)
  profile_id    Int?
  entities_id   Int?
  created_at    DateTime?    @db.DateTime(0)
  created_by    String?      @db.VarChar(255)
  mst_profile   mst_profile? @relation(fields: [profile_id], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "mst_authorization_profile_ibfk_1")

  @@index([profile_id], map: "profile_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model mst_authorization_usergroup {
  id            Int        @id @default(autoincrement())
  employee_code String?    @db.VarChar(20)
  group_id      Int?
  is_manager    String?    @db.VarChar(10)
  created_at    DateTime?  @db.DateTime(0)
  created_by    String?    @db.VarChar(255)
  mst_group     mst_group? @relation(fields: [group_id], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "mst_authorization_usergroup_ibfk_1")

  @@index([group_id], map: "group_id")
  @@index([employee_code], map: "employee_code")
}

model mst_entities {
  id                Int                 @id @default(autoincrement())
  entities_name     String?             @db.VarChar(255)
  parent_id         Int?
  created_at        DateTime?           @db.DateTime(0)
  created_by        String?             @db.VarChar(50)
  mst_authorization mst_authorization[]
}

model mst_group {
  id                          Int                           @id @default(autoincrement())
  entities_id                 Int?
  group_name                  String?                       @db.VarChar(255)
  parent_id                   Int?
  is_deleted                  Boolean?                      @default(false)
  created_at                  DateTime?                     @default(now()) @db.DateTime(0)
  created_by                  String?                       @db.VarChar(255)
  mst_authorization_usergroup mst_authorization_usergroup[]
  tr_project                  tr_project[]
}

model mst_manpower_cost {
  id                Int                 @id @default(autoincrement())
  technician_level  String?             @unique(map: "technician_level") @db.VarChar(255)
  hourly            Float?              @default(0)
  monthly           Float?              @default(0)
  created_at        DateTime?           @default(now()) @db.Timestamp(0)
  created_by        String?             @db.VarChar(255)
  mst_authorization mst_authorization[]
}

model mst_profile {
  id                        Int                         @id @default(autoincrement())
  profile_name              String?                     @db.VarChar(255)
  is_deleted                Boolean?                    @default(false)
  created_at                DateTime?                   @default(now()) @db.DateTime(0)
  created_by                String?                     @db.VarChar(255)
  mst_authorization         mst_authorization[]
  mst_authorization_profile mst_authorization_profile[]
}

model mst_project_state {
  id         Int          @id @default(autoincrement())
  status     String?      @db.VarChar(255)
  created_at DateTime?    @db.DateTime(0)
  created_by String?      @db.VarChar(50)
  tr_project tr_project[]
}

model mst_role {
  id         Int      @id @default(autoincrement())
  role       String?  @db.VarChar(100)
  is_deleted Boolean? @default(false)
}

model tr_document {
  id         Int       @id @default(autoincrement())
  type       String?   @db.VarChar(11)
  type_id    Int?
  name       String?   @db.VarChar(255)
  filename   String?   @db.VarChar(255)
  filepath   String?   @db.VarChar(255)
  filesize   Float?
  mime       String?   @db.VarChar(255)
  is_deleted String?   @default("0") @db.VarChar(255)
  created_at DateTime? @default(now()) @db.DateTime(0)
  created_by String?   @db.VarChar(255)

  @@index([type, type_id], map: "Type & Type ID")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model tr_history {
  id          Int       @id @default(autoincrement())
  type        String?   @db.VarChar(255)
  type_id     Int?
  action      String?   @db.VarChar(255)
  document_id Int?
  created_at  DateTime? @db.DateTime(0)
  created_by  String?   @db.VarChar(255)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model tr_project {
<<<<<<< HEAD
  id                Int        @id @default(autoincrement())
  request_id        Int?
  application_id    Int?
  project_name      String?    @db.VarChar(255)
  survey_id         Int?
  project_code      String?    @db.VarChar(255)
  background        String?    @db.LongText
  issue_description String?    @db.LongText
  business_impact   String?    @db.VarChar(255)
  group_id          Int?
  plan_start_date   DateTime?  @db.DateTime(0)
  plant_end_date    DateTime?  @db.DateTime(0)
  real_start_date   DateTime?  @db.DateTime(0)
  real_end_date     DateTime?  @db.DateTime(0)
  percent_done      String?    @db.VarChar(255)
  auto_percent_done String?    @db.VarChar(255)
  status            String?    @db.VarChar(255)
  is_deleted        String?    @default("0") @db.VarChar(255)
  created_at        DateTime?  @db.DateTime(0)
  created_by        String?    @db.VarChar(255)
  mst_group         mst_group? @relation(fields: [group_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_master_group")
=======
  id                  Int                @id @default(autoincrement())
  request_id          Int?
  application_id      Int?
  project_name        String?            @db.VarChar(255)
  survey_id           Int?
  project_code        String?            @db.VarChar(255)
  thumbnail           String?            @db.VarChar(255)
  background          String?            @db.LongText
  issue_description   String?            @db.LongText
  business_impact     String?            @db.LongText
  group_id            Int?
  plan_start_date     DateTime?          @db.DateTime(0)
  plan_end_date       DateTime?          @db.DateTime(0)
  real_start_date     DateTime?          @db.DateTime(0)
  real_end_date       DateTime?          @db.DateTime(0)
  expected_completion DateTime?          @db.DateTime(0)
  percent_done        String?            @db.VarChar(255)
  auto_percent_done   Boolean?
  state               Int?
  is_deleted          String?            @default("0") @db.VarChar(255)
  created_at          DateTime?          @db.DateTime(0)
  created_by          String?            @db.VarChar(255)
  mst_group           mst_group?         @relation(fields: [group_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_master_group")
  mst_project_state   mst_project_state? @relation(fields: [state], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_master_state")
  tr_project_task     tr_project_task[]
>>>>>>> a9903c20b358bfa15077e14401c7f92b55b443c4

  @@index([group_id], map: "fk_master_group")
  @@index([state], map: "fk_master_state")
}

model tr_project_activity {
  id            Int       @id @default(autoincrement())
  project_id    Int?
  activity_name String?   @db.VarChar(255)
  date          DateTime? @db.DateTime(0)
  content       String?   @db.VarChar(255)
  document      String?   @db.VarChar(255)
  created_at    DateTime? @db.DateTime(0)
  created_by    String?   @db.VarChar(255)
}

model tr_project_overview {
  id                  Int       @id @default(autoincrement())
  project_id          Int?
  purpose             String?   @db.VarChar(255)
  goals               String?   @db.VarChar(255)
  success_measurement String?   @db.VarChar(255)
  intangible_benefit  String?   @map("intangible benefit") @db.VarChar(255)
  impact_of_not_doing String?   @db.VarChar(255)
  created_at          DateTime? @db.DateTime(0)
  created_by          String?   @db.VarChar(255)
}

model tr_project_participant {
  id            Int       @id @default(autoincrement())
  project_id    Int?
  employee_code String?   @db.VarChar(10)
  role          String?   @db.VarChar(255)
  is_deleted    Boolean?  @default(false)
  created_at    DateTime? @default(now()) @db.DateTime(0)
  created_by    String?   @db.VarChar(255)
}

model tr_project_risk_mitigation {
  id            Int       @id
  project_id    Int?
  risk          String?   @db.VarChar(255)
  point_control String?   @db.VarChar(255)
  created_at    DateTime? @db.DateTime(0)
  created_by    String?   @db.VarChar(255)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model tr_project_scope {
  id          Int     @id @default(autoincrement())
  project_id  Int?
  features    String? @db.VarChar(255)
  description String? @db.VarChar(255)
  type        String? @db.VarChar(255)
  created_at  String? @db.VarChar(255)
  created_by  String? @db.VarChar(255)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model tr_project_task {
  id                    Int                @id @default(autoincrement())
  project_id            Int?
  task_name             String?            @db.VarChar(255)
  content               String?            @db.LongText
  plan_start_date       DateTime?          @db.DateTime(0)
  plan_end_date         DateTime?          @db.DateTime(0)
  real_start_date       DateTime?          @db.DateTime(0)
  real_end_date         DateTime?          @db.DateTime(0)
  plan_duration         Int?
  real_duration         Int?
  percent_done          Int?
  cost                  Float?
  task_type             String?            @db.VarChar(255)
  created_at            DateTime?          @default(now()) @db.Timestamp(0)
  created_by            String?            @db.VarChar(25)
  task_category         String?            @db.VarChar(50)
  is_deleted            Boolean?           @default(false)
  parent_id             Int?
  pic                   Int?
  tr_project            tr_project?        @relation(fields: [project_id], references: [id], onUpdate: SetNull, map: "tr_project_task_ibfk_1")
  tr_project_task       tr_project_task?   @relation("tr_project_taskTotr_project_task", fields: [parent_id], references: [id], onUpdate: SetNull, map: "tr_project_task_ibfk_2")
  other_tr_project_task tr_project_task[]  @relation("tr_project_taskTotr_project_task")
  mst_authorization     mst_authorization? @relation(fields: [pic], references: [id], onUpdate: SetNull, map: "tr_project_task_ibfk_3")

  @@index([project_id], map: "project_id")
  @@index([is_deleted], map: "is_deleted")
  @@index([task_category], map: "task_category")
  @@index([task_type], map: "task_type")
  @@index([parent_id], map: "parent_id")
  @@index([pic], map: "pic")
}

model tr_project_team {
  id                Int                @id @default(autoincrement())
  project_id        Int?
  employee_code     String?            @db.VarChar(10)
  is_deleted        Boolean?           @default(false)
  created_at        DateTime?          @default(now()) @db.DateTime(0)
  created_by        String?            @db.VarChar(255)
  mst_authorization mst_authorization? @relation(fields: [employee_code], references: [employee_code], onUpdate: SetNull, map: "tr_project_team_ibfk_1")

  @@index([employee_code], map: "tr_project_team_ibfk_1")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model tr_request {
  id                       Int                     @id @default(autoincrement())
  entities_id              Int?
  ticket_name              String?                 @db.VarChar(255)
  creation_date            DateTime?               @default(now()) @db.Date
  closed_date              DateTime?               @db.Date
  creator                  String?                 @db.VarChar(255)
  status                   String?                 @db.VarChar(255)
  urgency                  String?                 @db.VarChar(255)
  expected_completion_date DateTime?               @db.Date
  category                 String?                 @db.VarChar(255)
  type                     String?                 @db.VarChar(255)
  department_code          String?                 @db.VarChar(255)
  department_name          String?                 @db.VarChar(255)
  is_project               String?                 @db.VarChar(255)
  background               String?                 @db.Text
  issue_description        String?                 @db.Text
  business_impact          String?                 @db.Text
  created_at               DateTime?               @default(now()) @db.DateTime(0)
  created_by               String?                 @db.VarChar(255)
  impact                   String?                 @db.VarChar(255)
  priority                 String?                 @db.VarChar(255)
  tr_request_validation    tr_request_validation[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model tr_request_validation {
  id                 Int         @id @default(autoincrement())
  request_id         Int?
  user_id            String?     @db.VarChar(255)
  user_id_validate   String?     @db.VarChar(255)
  comment_submission String?     @db.VarChar(255)
  comment_validation String?     @db.VarChar(255)
  status             String?     @db.VarChar(255)
  submission_date    DateTime?   @default(now()) @db.DateTime(0)
  validation_date    DateTime?   @db.DateTime(0)
  state              String?     @db.VarChar(255)
  tr_request         tr_request? @relation(fields: [request_id], references: [id], onUpdate: SetNull, map: "FK_REQUEST")

  @@index([request_id], map: "FK_REQUEST")
}

model tr_request_technician {
  id            Int       @id @default(autoincrement())
  request_id    Int?
  employee_code String?   @db.VarChar(10)
  is_deleted    Boolean?  @default(false)
  created_at    DateTime? @default(now()) @db.DateTime(0)
  created_by    String?   @db.VarChar(255)
}
